---
import Headline from "~/components/ui/Headline.astro";
import WidgetWrapper from "~/components/ui/WidgetWrapper.astro";
import { Icon } from "astro-icon/components";
import type { Stats as Props } from "~/types";

const {
  title = await Astro.slots.render("title"),
  subtitle = await Astro.slots.render("subtitle"),
  tagline = await Astro.slots.render("tagline"),
  stats = [],
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render("bg"),
} = Astro.props;
---

<WidgetWrapper
  id={id}
  isDark={isDark}
  containerClass={`max-w-6xl xl:max-w-[1200px] ${classes?.container ?? ""}`}
  bg={bg}
>
  <Headline title={title} subtitle={subtitle} tagline={tagline} classes={classes?.headline as Record<string, string>} />

  <div class="grid gap-8 xl:gap-[32px] sm:grid-cols-2 lg:grid-cols-4 mt-12 xl:mt-[48px]">
    {
      stats.map((stat, index) => (
        <div class="group text-center">
          <div class="relative">
            {stat.icon && (
              <div class="flex items-center justify-center w-20 h-20 xl:w-[80px] xl:h-[80px] mx-auto mb-6 xl:mb-[24px] bg-gradient-to-br from-primary/10 to-secondary/10 rounded-full border-2 border-primary/20 group-hover:border-primary/40 transition-all duration-300 group-hover:scale-110">
                <Icon name={stat.icon} class="w-10 h-10 xl:w-[40px] xl:h-[40px] text-primary" />
              </div>
            )}

            <div class="relative">
              <div class="text-4xl xl:text-[48px] xl:leading-[56px] font-bold text-gray-900 dark:text-white mb-2 xl:mb-[8px] bg-gradient-to-r from-red-600 to-black bg-clip-text text-transparent">
                {stat.amount}
              </div>

              <h3 class="text-lg xl:text-[18px] xl:leading-[24px] font-semibold text-gray-700 dark:text-slate-300 mb-2 xl:mb-[8px]">
                {stat.title}
              </h3>

              {stat.description && (
                <p class="text-sm xl:text-[14px] xl:leading-[20px] text-gray-500 dark:text-slate-400">
                  {stat.description}
                </p>
              )}
            </div>

            {/* Decorative elements */}
            <div class="absolute -top-2 -right-2 w-4 h-4 xl:w-[16px] xl:h-[16px] bg-primary/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
            <div class="absolute -bottom-2 -left-2 w-3 h-3 xl:w-[12px] xl:h-[12px] bg-secondary/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-100" />
          </div>
        </div>
      ))
    }
  </div>
</WidgetWrapper>
