---
import Layout from "~/layouts/PageLayout.astro";

import Hero from "~/components/widgets/Hero.astro";
import prayer from "~/assets/images/prayer.webp";
import fire from "~/assets/images/index/envato.jpg";
import bible from "~/assets/images/index/bible.jpg";
import company from "~/assets/images/index/company.jpg";
import derek_prince from "~/assets/images/ministries/fire_of_god_and_fire_for_god-derek_prince.webp";
import kenneth_hagin from "~/assets/images/ministries/fire_of_god_and_fire_for_god-kenneth_hagin.webp";
import koinonia from "~/assets/images/ministries/fire_of_god_and_fire_for_god-koinonia.webp";
import prayer_church from "~/assets/images/ministries/fire_of_god_and_fire_for_god-prayer_church.webp";
import { TextAnimate } from "~/components/magicui/text-animate";
import CTAModern from "~/components/widgets/CTAModern.astro";
import ImageShowcase from "~/components/widgets/ImageShowcase.astro";
// import { getLangFromUrl, useTranslations } from "~/i18n/utils";
import city_in_flame from "~/assets/images/city_in_flame.webp";
import tree1 from "~/assets/images/tree1.webp";
import { BlurFade } from "~/components/magicui/blur-fade";
import VideoShowcase from "~/components/widgets/VideoShowcase.astro";
import FireButton from "~/components/ui/FireButton.astro";
import IceButton from "~/components/ui/IceButton.astro";
import FreezeOverlay from "~/components/ui/FreezeOverlay.astro";

const metadata = {
  title: "Flame the Freeze — Where the Word of God and experience meets",
  ignoreTitleTemplate: true,
};

// const lang = getLangFromUrl(Astro.url);
// const t = useTranslations(lang);
---

<Layout metadata={metadata} siteRebuildStatus={{ status: "inProgress", display: false }}>
  <!-- Hero Widget ******************* -->
  <div class="min-h-screen relative overflow-hidden">
    <!-- Video Background -->

    <video
      id="hero-video"
      class="absolute inset-0 w-full h-full object-cover z-0 opacity-0 transition-opacity duration-1000 ease-in-out"
      muted
      loop
      playsinline
      preload="auto"
    >
      <source src="/src/assets/videos/test.mp4" type="video/mp4" />
    </video>
    <!-- Gradient mask for bottom fade to purple background -->
    <div
      class="absolute inset-0 z-5"
      style="background: linear-gradient(to bottom, transparent 0%, transparent 50%, rgba(26, 0, 36, 0.05) 60%, rgba(26, 0, 36, 0.15) 70%, rgba(26, 0, 36, 0.35) 80%, rgba(26, 0, 36, 0.65) 90%, rgba(26, 0, 36, 0.85) 95%, #1a0024 100%);"
    >
    </div>
    <!-- Overlay for better text readability (only on video area) -->
    <div
      class="absolute inset-0 bg-black bg-opacity-30 z-10"
      style="background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.3) 50%, rgba(0, 0, 0, 0.15) 70%, transparent 85%);"
    >
    </div>
    <Hero classes={{ containerClass: "text-left relative z-20" }}>
      <Fragment slot="title">
        <TextAnimate
          client:load
          className="text-4xl xs:text-5xl md:text-6xl xl:text-[60px] xl:leading-[64px] font-semibold leading-tighter tracking-tighter mb-4 xl:mb-[16px] font-heading"
          animation="blurInUp"
          delay={1}
          duration={0.6}
          by="character"
          once={true}
          text="Fire of God and"
        />

        <TextAnimate
          client:load
          className="text-4xl xs:text-5xl md:text-6xl xl:text-[60px] xl:leading-[64px] font-semibold leading-tighter tracking-tighter mb-4 xl:mb-[16px] font-heading"
          animation="blurInUp"
          delay={1.6}
          duration={0.6}
          by="character"
          once={true}
          text="fire for God in 2025?"
        />

        <TextAnimate
          client:load
          className="text-xl xl:text-[20px] xl:leading-[28px] font-normal tracking-normal  text-muted dark:text-slate-300 "
          animation="blurInUp"
          delay={3}
          duration={0.6}
          by="line"
          once={true}
          text="Yep! It can be done. Are you tired? Experience\n the fire of God and be on fire for God today!"
        />
      </Fragment>

      <Fragment slot="subtitle">
        <div class="flex gap-4">
          <BlurFade client:load delay={4.2} direction="up" inView>
            <FireButton href="#what" text="Yes please!" variant="primary" size="small" icon="tabler:arrow-right" />
          </BlurFade>
          <BlurFade client:load delay={4.8} direction="up" inView>
            <IceButton text="No thank you" variant="primary" size="small" icon="tabler:x" onClick="triggerFreeze()" />
          </BlurFade>
        </div>
      </Fragment>
    </Hero>
  </div>

  <!-- Image Showcase Widget ********* -->

  <ImageShowcase
    id="what"
    tagline="What"
    title="What is the fire of God 🔥?<br/>And what is fire for God ❤️‍🔥?"
    layout="featured"
    classes={{
      headline: {
        subtitle: "max-w-md",
      },
    }}
    images={[
      {
        src: fire,
        alt: "",
        title: "Fire of God 🔥: It is the Holy Ghost!",
        description:
          "God himself is that fire. When the Holy Ghost is in a man that man can never be ordinary. He has got all the power of heaven residing in Him 🔋 and he can never be a lean soul 💪!",
      },
      {
        src: city_in_flame,
        alt: "",
        title: "Fire for God ❤️‍🔥: The man is burrrrning hot",
        description:
          "Have you seen people who are just ablaze for God 💥⚡? Like their presence makes you think about your life and christianity. Do you want the same!",
      },
      {
        src: tree1,
        alt: "",
        title: "There is fire 🔥 > there is life 🌳<br/>How hot are you?",
        description:
          "No, you cannot be silent, empty, miserable, and discontented when you are on fire. The Holy Spirit will keep you _soooo_ alive that you will be surprised of yourself 😄🙃",
      },
    ]}
  >
    <Fragment slot="subtitle">
      <span class="text-white">"Spirit filled souls are ablaze for God. </span>
      They love with a love that glows. They serve with a faith that kindles. They serve with a devotion that consumes. They
      hate sin with fierceness that burns. They rejoice with a joy that radiates. Love is perfected in the fire of God."
      ~ Samuel Chadwick
    </Fragment>
  </ImageShowcase>

  <!-- Services Widget *************** -->

  <ImageShowcase
    id="how"
    tagline="How"
    title="How can I receive<br/>the fire of God 📥🔥?"
    type={3}
    classes={{
      headline: {
        subtitle: "mx-0 max-w-md",
      },
    }}
    images={[
      {
        title: "Right company",
        description: "Join a company where the fire already is.",
        src: company,
        features: ["Log in a campfire", '"They prayed in one accord"'],
      },
      {
        title: "Prayer",
        description: "While he prayed his countenance altered.",
        src: prayer,
        features: ["Heartfelt / deep", "Fervent / passionate"],
      },
      {
        title: "The Word",
        description: "The Word of God is quick and powerful.",
        src: bible,
        features: ["Setting the hearts on fire", "Revelation of Spirit changing lives"],
      },
      {
        icon: true,
      },
    ]}
  >
    <Fragment slot="subtitle">
      <span class="text-white">The fire is not for a select few, but for all who believe.</span>
      <br class="hidden md:block" />
      But unfortunately many haven't tasted the fire of God. My friend. Are you discontented 😖, and looking for finally
      find the real thing? Look no further 🏁🎉!
    </Fragment>
  </ImageShowcase>

  <VideoShowcase
    id="where"
    tagline="Where"
    title="Where can I receive<br/>the fire of God? 🔎🤷‍♂️"
    type={4}
    classes={{
      headline: {
        subtitle: "mx-0 max-w-md",
      },
    }}
    videos={[
      {
        title: "Prayer Church - Flame the Freeze",
        link: "#",
        description: "Mystery of godliness unfolded",
        src: prayer_church,
        features: ["Prayer", "Wisdom"],
      },
      {
        title: "Koinonia",
        link: "#",
        description: "Intimacy | Partnership | Fellowship",
        src: koinonia,
        features: ["Balanced content of all subjects", "People of fire, who are relevant in this world"],
      },
      {
        title: "Kenneth Hagin - Rhema",
        link: "#",
        description: "Go and teach my people faith",
        src: kenneth_hagin,
        objectPosition: "top center",
        features: ["Faith", "Healing"],
      },
      {
        title: "Derek Prince Ministries",
        link: "#",
        description: "Reaching the unreached, and teaching the untaught.",
        src: derek_prince,
        objectPosition: "top center",
        features: ["Foundational pillars", "Deliverance / Curses", "Many other topics"],
      },
    ]}
  >
    <Fragment slot="subtitle">
      <span class="text-white">{`Be on fire for God => be in place where the fire of god is.`}</span>
      Below is `non exhaustive and exclusive` list of ministries, and categories of what God has empowered them to do. Fasten
      your seatbelts 🍒😁!
    </Fragment>
  </VideoShowcase>

  <!-- Call to Action Widget ********* -->

  <CTAModern
    id="cta"
    tagline="Are you ready to be on fire for God?"
    title="Experience the fire of God today"
    subtitle={`Seriously, don't wait another second. God is calling you to evade every cold❄️🥶 and enter into a <span class="text-white underline">divine</span> fire 🔥🥵. Noooooow(!) is the time of salvation!`}
    actions={[
      {
        buttonType: "fire", // 🔥 Fire button
        variant: "primary",
        size: "medium",
        text: "Yes, count me in!!",
        href: "#contact",
        icon: "tabler:arrow-right",
      },
      {
        buttonType: "ice", // ❄️ Ice button
        variant: "secondary",
        size: "medium",
        text: "Maybe another time..",
        href: "#testimonies",
        icon: "tabler:hand-stop",
      },
    ]}
  />

  <!-- Freeze Animation Overlay -->
  <FreezeOverlay />

  <script>
    document.addEventListener("astro:page-load", () => {
      // Start video after 6 seconds with fade-in effect
      const heroVideo = document.getElementById("hero-video") as HTMLVideoElement;
      if (heroVideo) {
        setTimeout(() => {
          // Start playing the video
          heroVideo.play().catch((error) => {
            console.log("Video autoplay failed:", error);
          });

          // Fade in the video
          heroVideo.classList.remove("opacity-0");
          heroVideo.classList.add("opacity-100");
        }, 1000); // 6 seconds delay
      }
    });
  </script>
</Layout>
